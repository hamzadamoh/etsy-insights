{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file:///home/user/etsy-insights/src/app/actions.ts"],"sourcesContent":["'use server';\n\nimport { z } from 'zod';\nimport type { EtsyApiResponse, EtsyData, EtsyListing, EtsyShop } from '@/lib/types';\n\nconst FormSchema = z.object({\n  storeName: z.string().min(1, 'Store name is required'),\n  favorites: z.coerce.number().min(0),\n  age: z.coerce.number().min(0),\n  views: z.coerce.number().min(0),\n});\n\nasync function fetchFromEtsy<T>(url: string): Promise<T> {\n  const apiKey = process.env.ETSY_API_KEY;\n  if (!apiKey) {\n    throw new Error('Etsy API key is not configured.');\n  }\n\n  const response = await fetch(url, {\n    headers: {\n      'x-api-key': apiKey,\n    },\n    cache: 'no-store', // Disable caching for fresh data\n  });\n\n  if (!response.ok) {\n    const errorBody = await response.text();\n    console.error(`Etsy API Error (${response.status}): ${errorBody}`);\n    throw new Error(`Failed to fetch data from Etsy. Status: ${response.status}`);\n  }\n\n  return response.json();\n}\n\nexport async function getEtsyInsights(\n  prevState: any,\n  formData: FormData\n): Promise<{ data: EtsyData | null; error: string | null }> {\n  try {\n    const validatedFields = FormSchema.safeParse({\n      storeName: formData.get('storeName'),\n      favorites: formData.get('favorites'),\n      age: formData.get('age'),\n      views: formData.get('views'),\n    });\n\n    if (!validatedFields.success) {\n      return { data: null, error: 'Invalid form data.' };\n    }\n\n    const { storeName } = validatedFields.data;\n\n    // 1. Get Shop ID from Shop Name\n    const shopSearchUrl = `https://api.etsy.com/v3/application/shops?shop_name=${encodeURIComponent(storeName)}`;\n    const shopData = await fetchFromEtsy<EtsyApiResponse<EtsyShop>>(shopSearchUrl);\n\n    if (!shopData.results || shopData.results.length === 0) {\n      return { data: null, error: `Shop \"${storeName}\" not found.` };\n    }\n    const shop = shopData.results[0];\n    const shopId = shop.shop_id;\n\n    // 2. Get Active Listings for the Shop\n    const listingsUrl = `https://api.etsy.com/v3/application/shops/${shopId}/listings/active?limit=100&includes=images`;\n    const listingsData = await fetchFromEtsy<EtsyApiResponse<EtsyListing>>(listingsUrl);\n    const listings = listingsData.results || [];\n    \n    return {\n      data: {\n        shop,\n        listings,\n      },\n      error: null,\n    };\n  } catch (error) {\n    console.error(error);\n    const errorMessage = error instanceof Error ? error.message : 'An unknown error occurred.';\n    return { data: null, error: errorMessage };\n  }\n}\n"],"names":[],"mappings":";;;;;AAEA;;;;;AAGA,MAAM,aAAa,kKAAA,CAAA,IAAC,CAAC,MAAM,CAAC;IAC1B,WAAW,kKAAA,CAAA,IAAC,CAAC,MAAM,GAAG,GAAG,CAAC,GAAG;IAC7B,WAAW,kKAAA,CAAA,IAAC,CAAC,MAAM,CAAC,MAAM,GAAG,GAAG,CAAC;IACjC,KAAK,kKAAA,CAAA,IAAC,CAAC,MAAM,CAAC,MAAM,GAAG,GAAG,CAAC;IAC3B,OAAO,kKAAA,CAAA,IAAC,CAAC,MAAM,CAAC,MAAM,GAAG,GAAG,CAAC;AAC/B;AAEA,eAAe,cAAiB,GAAW;IACzC,MAAM,SAAS,QAAQ,GAAG,CAAC,YAAY;IACvC,IAAI,CAAC,QAAQ;QACX,MAAM,IAAI,MAAM;IAClB;IAEA,MAAM,WAAW,MAAM,MAAM,KAAK;QAChC,SAAS;YACP,aAAa;QACf;QACA,OAAO;IACT;IAEA,IAAI,CAAC,SAAS,EAAE,EAAE;QAChB,MAAM,YAAY,MAAM,SAAS,IAAI;QACrC,QAAQ,KAAK,CAAC,CAAC,gBAAgB,EAAE,SAAS,MAAM,CAAC,GAAG,EAAE,WAAW;QACjE,MAAM,IAAI,MAAM,CAAC,wCAAwC,EAAE,SAAS,MAAM,EAAE;IAC9E;IAEA,OAAO,SAAS,IAAI;AACtB;AAEO,eAAe,gBACpB,SAAc,EACd,QAAkB;IAElB,IAAI;QACF,MAAM,kBAAkB,WAAW,SAAS,CAAC;YAC3C,WAAW,SAAS,GAAG,CAAC;YACxB,WAAW,SAAS,GAAG,CAAC;YACxB,KAAK,SAAS,GAAG,CAAC;YAClB,OAAO,SAAS,GAAG,CAAC;QACtB;QAEA,IAAI,CAAC,gBAAgB,OAAO,EAAE;YAC5B,OAAO;gBAAE,MAAM;gBAAM,OAAO;YAAqB;QACnD;QAEA,MAAM,EAAE,SAAS,EAAE,GAAG,gBAAgB,IAAI;QAE1C,gCAAgC;QAChC,MAAM,gBAAgB,CAAC,oDAAoD,EAAE,mBAAmB,YAAY;QAC5G,MAAM,WAAW,MAAM,cAAyC;QAEhE,IAAI,CAAC,SAAS,OAAO,IAAI,SAAS,OAAO,CAAC,MAAM,KAAK,GAAG;YACtD,OAAO;gBAAE,MAAM;gBAAM,OAAO,CAAC,MAAM,EAAE,UAAU,YAAY,CAAC;YAAC;QAC/D;QACA,MAAM,OAAO,SAAS,OAAO,CAAC,EAAE;QAChC,MAAM,SAAS,KAAK,OAAO;QAE3B,sCAAsC;QACtC,MAAM,cAAc,CAAC,0CAA0C,EAAE,OAAO,0CAA0C,CAAC;QACnH,MAAM,eAAe,MAAM,cAA4C;QACvE,MAAM,WAAW,aAAa,OAAO,IAAI,EAAE;QAE3C,OAAO;YACL,MAAM;gBACJ;gBACA;YACF;YACA,OAAO;QACT;IACF,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC;QACd,MAAM,eAAe,iBAAiB,QAAQ,MAAM,OAAO,GAAG;QAC9D,OAAO;YAAE,MAAM;YAAM,OAAO;QAAa;IAC3C;AACF;;;IA7CsB;;AAAA,+OAAA","debugId":null}},
    {"offset": {"line": 98, "column": 0}, "map": {"version":3,"sources":["file:///home/user/etsy-insights/.next-internal/server/app/page/actions.js%20%28server%20actions%20loader%29"],"sourcesContent":["export {getEtsyInsights as '60ad8d7ce79a00fedd884d7fd2e60dfa8f730fdc4a'} from 'ACTIONS_MODULE0'\n"],"names":[],"mappings":";AAAA","debugId":null}},
    {"offset": {"line": 150, "column": 0}, "map": {"version":3,"sources":["file:///home/user/etsy-insights/src/components/etsy/etsy-insights-page.tsx/proxy.mjs"],"sourcesContent":["import { registerClientReference } from \"react-server-dom-turbopack/server.edge\";\nexport default registerClientReference(\n    function() { throw new Error(\"Attempted to call the default export of [project]/src/components/etsy/etsy-insights-page.tsx <module evaluation> from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/src/components/etsy/etsy-insights-page.tsx <module evaluation>\",\n    \"default\",\n);\n"],"names":[],"mappings":";;;AAAA;;uCACe,CAAA,GAAA,qPAAA,CAAA,0BAAuB,AAAD,EACjC;IAAa,MAAM,IAAI,MAAM;AAA8S,GAC3U,4EACA","debugId":null}},
    {"offset": {"line": 164, "column": 0}, "map": {"version":3,"sources":["file:///home/user/etsy-insights/src/components/etsy/etsy-insights-page.tsx/proxy.mjs"],"sourcesContent":["import { registerClientReference } from \"react-server-dom-turbopack/server.edge\";\nexport default registerClientReference(\n    function() { throw new Error(\"Attempted to call the default export of [project]/src/components/etsy/etsy-insights-page.tsx from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/src/components/etsy/etsy-insights-page.tsx\",\n    \"default\",\n);\n"],"names":[],"mappings":";;;AAAA;;uCACe,CAAA,GAAA,qPAAA,CAAA,0BAAuB,AAAD,EACjC;IAAa,MAAM,IAAI,MAAM;AAA0R,GACvT,wDACA","debugId":null}},
    {"offset": {"line": 178, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"","debugId":null}},
    {"offset": {"line": 188, "column": 0}, "map": {"version":3,"sources":["file:///home/user/etsy-insights/src/components/password-protection.tsx/proxy.mjs"],"sourcesContent":["import { registerClientReference } from \"react-server-dom-turbopack/server.edge\";\nexport const PasswordProtection = registerClientReference(\n    function() { throw new Error(\"Attempted to call PasswordProtection() from the server but PasswordProtection is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/src/components/password-protection.tsx <module evaluation>\",\n    \"PasswordProtection\",\n);\n"],"names":[],"mappings":";;;AAAA;;AACO,MAAM,qBAAqB,CAAA,GAAA,qPAAA,CAAA,0BAAuB,AAAD,EACpD;IAAa,MAAM,IAAI,MAAM;AAAoP,GACjR,wEACA","debugId":null}},
    {"offset": {"line": 202, "column": 0}, "map": {"version":3,"sources":["file:///home/user/etsy-insights/src/components/password-protection.tsx/proxy.mjs"],"sourcesContent":["import { registerClientReference } from \"react-server-dom-turbopack/server.edge\";\nexport const PasswordProtection = registerClientReference(\n    function() { throw new Error(\"Attempted to call PasswordProtection() from the server but PasswordProtection is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/src/components/password-protection.tsx\",\n    \"PasswordProtection\",\n);\n"],"names":[],"mappings":";;;AAAA;;AACO,MAAM,qBAAqB,CAAA,GAAA,qPAAA,CAAA,0BAAuB,AAAD,EACpD;IAAa,MAAM,IAAI,MAAM;AAAoP,GACjR,oDACA","debugId":null}},
    {"offset": {"line": 216, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"","debugId":null}},
    {"offset": {"line": 226, "column": 0}, "map": {"version":3,"sources":["file:///home/user/etsy-insights/src/app/page.tsx"],"sourcesContent":["import EtsyInsightsPage from '@/components/etsy/etsy-insights-page';\nimport { PasswordProtection } from '@/components/password-protection';\nimport { Store } from 'lucide-react';\n\nexport default function Home() {\n  return (\n    <PasswordProtection>\n      <main className=\"min-h-screen bg-background\">\n        <div className=\"container mx-auto px-4 py-8\">\n          <header className=\"text-center mb-8 no-print\">\n            <div className=\"inline-flex items-center justify-center bg-primary/10 text-primary p-3 rounded-lg mb-4\">\n              <Store className=\"h-8 w-8\" />\n            </div>\n            <h1 className=\"text-4xl md:text-5xl font-bold tracking-tight text-primary-foreground bg-clip-text text-transparent bg-gradient-to-r from-primary to-accent-foreground\">\n              Etsy Insights\n            </h1>\n            <p className=\"mt-3 text-lg text-muted-foreground max-w-2xl mx-auto\">\n              Analyze individual Etsy stores or bulk analyze multiple shops. Get shop insights, sales data, and copy results to Google Sheets.\n            </p>\n          </header>\n          \n          <div className=\"printable-area\">\n            <EtsyInsightsPage />\n          </div>\n\n        </div>\n      </main>\n      <footer className=\"py-6 text-center text-sm text-muted-foreground no-print\">\n        Etsy Insights Â© {new Date().getFullYear()}\n      </footer>\n    </PasswordProtection>\n  );\n}\n"],"names":[],"mappings":";;;;AAAA;AACA;AACA;;;;;AAEe,SAAS;IACtB,qBACE,8OAAC,4IAAA,CAAA,qBAAkB;;0BACjB,8OAAC;gBAAK,WAAU;0BACd,cAAA,8OAAC;oBAAI,WAAU;;sCACb,8OAAC;4BAAO,WAAU;;8CAChB,8OAAC;oCAAI,WAAU;8CACb,cAAA,8OAAC,oMAAA,CAAA,QAAK;wCAAC,WAAU;;;;;;;;;;;8CAEnB,8OAAC;oCAAG,WAAU;8CAAyJ;;;;;;8CAGvK,8OAAC;oCAAE,WAAU;8CAAuD;;;;;;;;;;;;sCAKtE,8OAAC;4BAAI,WAAU;sCACb,cAAA,8OAAC,sJAAA,CAAA,UAAgB;;;;;;;;;;;;;;;;;;;;;0BAKvB,8OAAC;gBAAO,WAAU;;oBAA0D;oBACzD,IAAI,OAAO,WAAW;;;;;;;;;;;;;AAI/C","debugId":null}}]
}